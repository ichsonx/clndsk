# clndsk - 文件清理工具

`clndsk` 是一个用于批量清理不需要文件的命令行工具。该工具可以根据文件名中的关键字匹配并删除文件，同时支持清理空文件夹。

## 功能特性

- **关键字匹配删除**：根据预定义的关键字列表匹配文件名进行批量删除
- **路径选择**：支持清理当前目录或指定路径下的文件
- **递归遍历**：支持递归遍历所有子目录或仅遍历当前目录
- **空文件夹清理**：可选择在文件清理完成后清理空文件夹
- **NTFS 文件系统优化**：特别优化了在 NTFS 文件系统（如外接硬盘）上的文件删除操作
- **文件锁定检测**：检测文件是否被其他进程锁定，避免删除失败
- **重试机制**：删除失败时自动重试，提高成功率
- **彩色提示**：使用不同颜色显示操作状态和提示信息
- **详细错误报告**：提供详细的错误信息帮助诊断问题

## 安装

直接克隆项目仓库：

```bash
git clone https://github.com/ichsonx/clndsk.git
cd clndsk
```

## 使用方法

运行程序：

```bash
python clndsk.py
```

程序将引导您完成以下步骤：

1. 选择清理目录（当前目录或指定路径）
2. 选择遍历方式（递归或非递归）
3. 选择是否清理空文件夹
4. 程序将显示找到的匹配文件数量并询问是否删除
5. 确认后开始批量删除文件

## 配置

编辑 `clndsk.py` 文件中的 `keypoint` 数组，添加您要匹配的关键字：

```python
keypoint = [".dat","赌",".zip","台 妹 子 線 上 現 場 直 播 各",".html",".exe",".apk","催情神药","宇宙最丰富完整","最 齐 全 H 漫 画","最好看.mp4","最强大.mp4",".rar"]
```

## 适用场景

- 清理下载目录中的无用文件
- 清理包含特定关键字的垃圾文件
- 清理外接硬盘或 NTFS 文件系统上的文件
- 清理空文件夹以整理目录结构

## 技术细节

- 使用 Python 3 编写
- 跨平台支持（Windows、Linux、macOS）
- 针对 NTFS 文件系统进行了优化
- 包含文件锁定检测和重试机制

## 项目结构

```
clndsk/
├── clndsk.py                 # 主程序文件
├── project_map.md            # 项目地图文件
├── README.md                 # 项目说明文件
├── .gitignore               # Git 忽略配置
└── openspec/                # 规范文档目录
    ├── specs/               # 需求规范
    ├── changes/             # 变更记录
    ├── testuat/             # 用户验收测试
    └── testuat 2/           # 用户验收测试
```

## 版本历史

- **v1.2** (最新) - 增强 NTFS 文件系统支持，添加文件锁定检测和重试机制
- **v1.1** - 添加空文件夹清理功能
- **v1.0** - 初始版本，基础文件清理功能

## 注意事项

- 请谨慎使用，删除的文件无法恢复
- 建议在执行清理前备份重要文件
- 程序会根据文件名匹配进行删除，不会检查文件内容

## 许可证

本项目为开源项目。